<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
<meta name="title" content="Importing | Tome" />
<meta name="twitter:card" content="summary_large_image" />
<link rel="canonical" href="https://tome.fyi/docs/technical/importer" />
<meta name="twitter:title" content="Importing" />
<meta name="twitter:description" content="When an editing session is started with Tome, work is done from an initial state of content and config based on what was previously exported. This is accomplished by the importer service and related commands.

The content import flow works like this:" />
<meta name="description" content="When an editing session is started with Tome, work is done from an initial state of content and config based on what was previously exported. This is accomplished by the importer service and related commands.

The content import flow works like this:" />
<meta name="twitter:creator:id" content="@DrupalSAM" />
<meta name="twitter:creator" content="@DrupalSAM" />
<meta name="Generator" content="Drupal 8 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="/themes/custom/tomefyi/favicon.ico" type="image/vnd.microsoft.icon" />
<link rel="revision" href="/docs/technical/importer" />
<link rel="prev" href="/docs/technical/exporter" />
<link rel="up" href="/docs/technical" />
<link rel="next" href="/docs/technical/static" />

    <title>Importing | Tome</title>
    <link rel="stylesheet" href="/sites/default/files/css/css_qg46GI0ojKnyB26rZYB_1DYH8LsUqO53LDBFDqtjV-I.css?petiqf" media="all" />
<link rel="stylesheet" href="/sites/default/files/css/css_mL9KHPwVYgB-bwtQ33MYhZ_BUW0DRmxrKbwdkAzJe64.css?petiqf" media="all" />
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:900i|Rubik" media="all" />
<link rel="stylesheet" href="/sites/default/files/css/css_nS_MJliQn2kMoEe8HX1TCBkuIoTp6m8x7b_il6EUnu8.css?petiqf" media="all" />

    
<!--[if lte IE 8]>
<script src="/sites/default/files/js/js_VtafjXmRvoUgAzqzYTA3Wrjkx9wcWhjP0G4ZnnqRamA.js"></script>
<![endif]-->

  </head>
  <body class="path-node page-node-type-book">
        <a href="#main-content" class="visually-hidden focusable skip-link">
      Skip to main content
    </a>
    
      <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas>
    <div class="page page-node-book">

      <header>
        <div class="region region-header">
    <div id="block-sitebranding" class="block block-system block-system-branding-block">
  
    
        <a href="/" title="Home" rel="home" class="site-logo">
      <img src="/themes/custom/tomefyi/logo.svg" alt="Home" />
    </a>
      </div>

  </div>

    </header>
  
  <main role="main">
    <a id="main-content" tabindex="-1"></a>

          <aside class="sidebar" role="complementary">
          <div class="region region-sidebar">
    <div id="block-expandedbooknavigation" class="block block-tfyi-book block-expanded-book-navigation">
  
    
        <nav id="book-block-menu-1" class="book-block-menu" role="navigation" aria-label="Book outline for Documentation">
    
              <a class="burger" href="#">&#9776; Navigation</a>
      <ul  class="menu burger-menu">
                    <li class="menu-item menu-item--expanded">
        <a href="/docs" hreflang="en">Documentation</a>
                                <ul class="menu">
                    <li class="menu-item">
        <a href="/docs/getting-started" hreflang="en">Getting started</a>
              </li>
                <li class="menu-item">
        <a href="/docs/using-the-command-line" hreflang="en">Using the command line</a>
              </li>
                <li class="menu-item">
        <a href="/docs/module-compatibility" hreflang="en">Module compatibility</a>
              </li>
                <li class="menu-item menu-item--expanded">
        <a href="/docs/technical" hreflang="en">Technical documentation</a>
                                <ul class="menu">
                    <li class="menu-item">
        <a href="/docs/technical/exporter" hreflang="en">Exporting</a>
              </li>
                <li class="menu-item">
        <a href="/docs/technical/importer" hreflang="en">Importing</a>
              </li>
                <li class="menu-item">
        <a href="/docs/technical/static" hreflang="en">Static site generation</a>
              </li>
                <li class="menu-item">
        <a href="/docs/site-settings" hreflang="en">Site specific settings</a>
              </li>
        </ul>
  
              </li>
                <li class="menu-item menu-item--expanded">
        <a href="/docs/hosting" hreflang="en">Hosting guides</a>
                                <ul class="menu">
                    <li class="menu-item">
        <a href="/docs/hosting/github-pages" hreflang="en">Github pages</a>
              </li>
                <li class="menu-item">
        <a href="/docs/hosting/netlify" hreflang="en">Netlify</a>
              </li>
        </ul>
  
              </li>
        </ul>
  
              </li>
        </ul>
  


  </nav>

  </div>

  </div>

      </aside>
    
    <div class="content">
        <div class="region region-content">
    <div id="block-tomefyi-page-title" class="block block-core block-page-title-block">
  
    
      
  <h1 class="page-title"><span class="field field--name-title field--type-string field--label-hidden">Importing</span>
</h1>


  </div>
<div id="block-mainpagecontent" class="block block-system block-system-main-block">
  
    
      
<article role="article" class="node node--type-book node--view-mode-full">

  
    

  
  <div class="node__content">
    
            <div class="clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item"><p>When an editing session is started with Tome, work is done from an initial state of content and config based on what was previously exported. This is accomplished by the importer service and related commands.</p>

<p>The content import flow works like this:</p>

<ol>
	<li>A site profile is installed - advanced users should be using "minimal".</li>
	<li>The "drush tome:import" command is ran.</li>
	<li>All existing content entities are deleted - this ensures a clean initial state to import from.</li>
	<li>The "drush&nbsp;config-import" command is internally invoked, and runs normally.</li>
	<li>A chunked array of content to import is returned by the "tome.importer" service. This array is built using the content index, and a sorted Drupal Graph object.</li>
	<li>Each chunk of the array is processed serially, then within each chunk content is imported concurrently. This lets content import super fast, without doing anything in the wrong order. For example, you can usually import files concurrently as they don't typically depend on any other entity, but nodes likely have dependencies to other nodes, files, and users.</li>
	<li>Each piece of content is read from the "tome.storage.content" storage, and then denormalized into a real entity and saved. If the content being denormalized is a translation, it is added to the default entity then saved.</li>
	<li>Cache is rebuilt.</li>
</ol>

<p>Compared to the content export process, the import process is fairly straightforward. This is due mostly to Drush already figuring out config for us, and the index file being generated on export.</p>
</div>
      
  <nav id="book-navigation-1" class="book-navigation" role="navigation" aria-labelledby="book-label-1">
    
          <h2 class="visually-hidden" id="book-label-1">Book traversal links for Importing</h2>
      <ul class="book-pager">
              <li class="book-pager__item book-pager__item--previous">
          <a href="/docs/technical/exporter" rel="prev" title="Go to previous page"><b>‹</b> Exporting</a>
        </li>
                    <li class="book-pager__item book-pager__item--center">
          <a href="/docs/technical" title="Go to parent page">Up</a>
        </li>
                    <li class="book-pager__item book-pager__item--next">
          <a href="/docs/technical/static" rel="next" title="Go to next page">Static site generation <b>›</b></a>
        </li>
          </ul>
      </nav>

  </div>

</article>

  </div>

  </div>

    </div>
  </main>

  <footer>
      <div class="region region-footer">
    <div id="block-footerblock" class="block block-block-content block-block-content41a379f1-9578-43d6-9b62-977bfe857232">
  
    
      
            <div class="clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item"><p class="text-align-center"><a href="https://github.com/drupal-tome">Github</a>&nbsp;- <a href="https://www.drupal.org/project/tome">Drupal.org</a> - <a href="https://twitter.com/DrupalSAM">Twitter</a>&nbsp;- <a href="https://drupalslack.herokuapp.com">Slack (#tome)</a></p>

<p class="text-align-center">Tome is in development and likely has some bugs. Please be patient and&nbsp;respectful when reporting issues!</p>

<p class="text-align-center">This site is built with Tome! <a href="https://github.com/drupal-tome/drupal-tome.github.io">Check it out and build it locally from Github</a>.</p>
</div>
      
  </div>

  </div>

  </footer>

</div>

  </div>

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","user":{"uid":0,"permissionsHash":"a49ab206f4b6d6cbd68d7961226b58147423e63db6502471462e90bce20de354"}}</script>
<script src="/sites/default/files/js/js_37g1_sHKqcUxrL1zjnYWC6JdriTLzVkkUVYJK1s1gko.js"></script>

  </body>
</html>
